:root{ --radius-base:16px; --border-width:1px; }/*!
 * style.css — Lexitron styles
 * Version: 1.5.0
 * Date: 2025-09-22
 *
 * Purpose:
 *  - Core layout and theme variables
 *  - Header, sets bar, card, options, modals, footer
 *  - Responsive tweaks
 *
 * NOTE: Section dividers were inserted automatically at rule boundaries only.
 *       No CSS declarations were modified.
 */

:root{
  --bg:#f6f7fb; --card:#fff; --text:#1f2430; --muted:#6b7280;
  --green:#16a34a; --red:#dc2626; --border:#e5e7eb; --shadow:0 10px 30px rgba(16,24,40,.08);
  --mint:#34d399; --mint-strong:#10b981; --mint-weak:#d1fae5;
  --overlay:rgba(15,23,42,.6);
  --tool-bg:#f5f7fb; --tool-border:#e2e8f0; --tool-fg:#0f172a;
  --idk-fg:#0f172a; --idk-border:#cbd5e1; --idk-bg:transparent;
  --focus-ring:#22c55e40;
}/* Тёмная тема — у нас в проекте используется [data-theme="dark"] */
[data-theme="dark"]{
  --bg:#0b1020; --card:#0f172a; --text:#e5e7eb; --muted:#9ca3af;
  --green:#22c55e; --red:#ef4444; --border:#1f2937; --shadow:0 10px 30px rgba(0,0,0,.4);
  --mint:#34d399; --mint-strong:#10b981; --mint-weak:#0b3b2f;
  --overlay:rgba(2,6,23,.7);
  --tool-bg:#0f172a; --tool-border:#1f2937; --tool-fg:#e5e7eb;
  --idk-fg:#e5e7eb; --idk-border:#334155; --idk-bg:transparent;
  --focus-ring:#22c55e55;
}/* База */
*{box-sizing:border-box}html,body{height:100%}/* ============================== BODY / GLOBAL =============================== */
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg); color:var(--text);
  display:flex; flex-direction:column;
}/* Header */

header{
  padding:10px 14px;
  display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:nowrap;
  background:var(--card); border-bottom:1px solid var(--idk-border);
}header .brand{ display:flex; align-items:center; gap:8px; }.brand h1{font-size:26px;margin:0;font-weight:800}.brand .tagline{font-size:13px;color:var(--muted)}.ver{font-size:12px;color:var(--muted);margin-left:6px}.iconBtn{
  width:44px;height:44px;padding:0;border-radius:12px;
  display:flex;align-items:center;justify-content:center;font-size:26px;line-height:1;
  border:1px solid var(--tool-border);background:var(--tool-bg);color:var(--tool-fg);
  cursor:pointer;transition:transform .12s ease, background .2s ease, border-color .2s ease, color .2s ease;
}.iconBtn:hover{ filter:brightness(1.06); }.iconBtn:active{ transform:scale(0.95); }.iconBtn:focus-visible{ outline:none; box-shadow:0 0 0 2px var(--focus-ring); }/* Лого */
header .logo-mark{
  width:46px;height:46px;border-radius:6px;background:var(--card);border:1px solid var(--border);
  padding:2px;object-fit:contain;pointer-events:none;
}header .title-wrap{ display:flex; flex-direction:column; line-height:1.1; }header .title-wrap h1{ margin:0; }header .title-wrap .tagline{ margin-top:2px; }header .controls{ position:relative; z-index:1; display:flex; gap:10px; align-items:center; }/* Main Card */
main{flex:1;display:grid;place-items:center;padding:12px}/* ============================== CARD / TRAINER CORE =============================== */
.card{
  width: 640px; max-width: 94vw;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:24px;
  box-shadow:var(--shadow);
  text-align:center;
}.topRow{
  display:flex; align-items:center; justify-content:space-between;
  min-height:40px; margin-bottom:4px;
}.stars{display:flex; gap:6px; align-items:center}.starIcon{font-size:24px;color:#cbd5e1}.starIcon.filled{color:#fbbf24}.heart{
  font-size:24px; background:none; border:none; cursor:pointer;
  transition:transform .2s ease; color:inherit; line-height:1;
  width:24px; height:24px; display:flex; align-items:center; justify-content:center;
}

:root[data-theme="light"] .heart {
  color: var(--muted);
}.heart:active{transform:scale(0.9)}/* ============================== WORD BLOCK =============================== */

.word{font-size:36px; font-weight:800; margin:6px 0 2px; line-height:1.15}.hint{color:var(--muted); margin-bottom:12px; font-size:14px}/* Sets bar — компактный, чувствительный к теме */

#setsBar{ display:flex; flex-wrap:wrap; justify-content:flex-start; gap:2px; padding:4px 0 2px; margin:4px 0 4px;
  padding-left:6px;
  padding-right:6px;}#setsBar .setTile:hover{ transform: translateY(-1px); }#setsBar .setTile:active{ transform:scale(0.97); }#setsBar .setTile.done{
  background: rgba(34,197,94,.18);
  border-color: rgba(34,197,94,.7);
  color: inherit;
}@media (max-width:360px){
  #setsBar .setTile{ min-width:32px; height:32px; padding:0 8px; border-radius:12px; border:1px solid var(--border); background:var(--card); color:var(--muted); font-weight:600; font-size:13px; user-select:none; cursor:pointer; transition:transform .12s ease, background .12s ease, border-color .12s ease, color .12s ease; }
}/* Мотивация — между наборами и звёздами */

.options{
  display:grid; grid-template-columns:1fr 1fr;
  gap:12px; justify-items:stretch; margin:14px 0 12px;
}@media (max-width:420px){ .options{ grid-template-columns:1fr; } }button{
  padding:0 14px; border-radius:14px; font-size:17px; cursor:pointer;
  transition:background .2s, transform .06s ease, filter .2s;
}/* ============================== OPTION BUTTON =============================== */
.optionBtn{
  height:52px; border:none; color:#073b3a; background:var(--mint); font-weight:600; outline:none;
}.optionBtn:focus{ outline:none; box-shadow:none; }.optionBtn:active{ transform:scale(0.98); }.optionBtn.correct{ background:var(--green); color:#fff; }.optionBtn.wrong{ background:var(--red); color:#fff; }/* "Не знаю" — по центру и без мигания фокуса */
.idkWrapper{ grid-column:1 / -1; display:flex; justify-content:center; margin-top:6px; }button.ghost{
  background:var(--idk-bg); border:1px solid var(--border); color:var(--idk-fg);
  margin-top:6px; height:42px; padding:0 16px;
  border-radius:12px; font-size:15px; font-weight:600;
  display:flex; align-items:center; justify-content:center; box-shadow:none; will-change: transform, filter;
}button.ghost:hover{ filter:brightness(1.06); }button.ghost:focus, button.ghost:focus-visible{ outline:none; box-shadow:0 0 0 3px var(--focus-ring); }[data-theme="dark"] button.ghost{ background:#111827; color:var(--text); border:1px solid #374151; box-shadow:none; }/* Статистика */

.statsBar{
  margin-top:8px; font-size:12px; color:var(--muted);
  border:1px solid var(--border); border-radius:12px; padding:6px 10px;
  display:inline-block; background:var(--card);
}/* Модалка словарей */
.modal.hidden{display:none}/* ============================== MODAL · GENERIC =============================== */
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:50; background: var(--overlay);}/* ============================== MODAL · BACKDROP =============================== */
.backdrop{position:absolute; inset:0; background:var(--overlay)}/* ============================== MODAL · DIALOG FRAME =============================== */
.dialog{
  position:relative; z-index:10; background:var(--card); border:1px solid var(--border); border-radius:14px;
  padding:14px; box-shadow:var(--shadow);
  width:min(860px,94vw); max-height:90vh; overflow:auto;
}.dialog h2{ text-align:center; margin:0 0 8px; font-size:26px; }/* Сетка списка словарей с фиксированной зоной действий */

.dictList{ display:flex; flex-direction:column; gap:6px; margin-top:6px; max-height:200px; overflow-y:auto; }.dictRow{
  display:grid; grid-template-columns:22px 1fr 110px;
  align-items:center; gap:10px; padding:10px 10px;
  border:1px solid var(--border); border-radius:12px; background:var(--card);
}.dictRow.active{ border-color:var(--mint); background:var(--mint-weak); box-shadow:0 0 0 2px rgba(52,211,153,.12) inset; }.dictFlag{ font-size:16px; width:22px; text-align:center; }.dictName{
  font-weight:600; font-size:15px;
  overflow:visible; text-overflow:ellipsis; white-space:nowrap; text-align:left; cursor:pointer;
}.dictActions{ display:flex; gap:6px; justify-content:flex-end; }.iconOnly{
  width:30px; height:30px; border:1px solid var(--border); border-radius:12px; background:var(--card); cursor:pointer;
  display:flex; align-items:center; justify-content:center; font-size:15px; transition: filter .2s ease, transform .08s ease;
}.iconOnly:hover{ filter:brightness(1.06); }.iconOnly:active{ transform:scale(0.96); }/* Кнопка OK в модалке */
.modalActions{ display:flex; justify-content:center; margin-top:10px; }.modalActions .primary{
  padding:9px 20px; font-size:15px; border-radius:12px;
  background:var(--mint); border:none; color:#073b3a;
}.modalActions .primary:hover{ background:var(--mint-strong); color:#fff; }/* Footer */

footer{
  padding:10px 14px; color:var(--muted);
  border-top:1px solid var(--border);
  font-size:13px; text-align:center;
}.copyright{ color:var(--muted); }/* Small screens */
@media (max-width:600px){
  .brand h1{font-size:22px}
  .card{ padding:20px }
  .word{font-size:30px}
  .optionBtn{font-size:15px; height:50px}
}/* конец! */

.dictRow.disabled{
  opacity: .55;
  cursor: not-allowed;
}.dictRow.disabled .dictName{ color: var(--muted); }.dictRow.disabled .iconOnly{ pointer-events:none; opacity:.5; }/* Language flags row (updated to match iconBtn style) */
.langFlags{
  display:flex; gap:8px; justify-content:center; align-items:center;
  margin: 6px 0 8px;
  flex-wrap: wrap;
}.langFlags .flagBtn,
#langFlags .flagBtn{
  width:44px; height:44px; border-radius:12px;
  border:1px solid var(--tool-border); background:var(--tool-bg); color:var(--tool-fg);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; user-select:none; font-size:26px; line-height:1;
  transition:transform .12s ease, background .2s ease, border-color .2s ease, color .2s ease;
}:root[data-theme="dark"] .langFlags .flagBtn,
:root[data-theme="dark"] #langFlags .flagBtn{ background:var(--tool-bg); }.langFlags .flagBtn:hover,
#langFlags .flagBtn:hover{ filter: brightness(1.06); }.langFlags .flagBtn:active,
#langFlags .flagBtn:active{ transform: scale(0.95); }.langFlags .flagBtn:focus-visible,
#langFlags .flagBtn:focus-visible{ outline:none; box-shadow:0 0 0 2px var(--focus-ring); }.langFlags .flagBtn.active,
#langFlags .flagBtn.active{ border-color: var(--mint); box-shadow:0 0 0 2px rgba(52,211,153,.12) inset; }/* Active dictionary title above sets */
.dictActiveTitle{
  text-align:center;
  font-weight:700;
  font-size:16px;
  margin:14px 0 8px;
  color:var(--text);
}/* Верхняя статистика без белой рамки */

#setStats{ width:100%; text-align:center; color:var(--muted); background:transparent !important; border:none !important; box-shadow:none !important; margin-top:0px; margin-bottom:0; }/* Extra actions (info + donate) */
.extraActions{
  margin: 14px auto 10px;
  display:flex; align-items:center; justify-content:center; gap:10px; flex-wrap:wrap;
}.extraActions .iconBtn{width:44px; height:44px; border-radius:12px;
  font-size:18px;}/* Simple modal using existing theme tokens */
.dictActiveTitle .dictFlag{
  display:inline-block;
  margin-right:6px;
  line-height:1;
  vertical-align:-1px;
  font-size:18px;
}/* Активный флаг — базово (светлая тема) */
.langFlags .flagBtn.active{
  background: rgba(16, 185, 129, .16);   /* мягкая зелёная заливка */
  border-color: #10b981;                 /* тот же акцент */
  box-shadow: inset 0 0 0 2px rgba(16,185,129,.28);
  color: var(--tool-fg);
  font-weight: 700;
  transition: background .15s ease, box-shadow .15s ease, border-color .15s ease;
}/* Активный флаг — тёмная тема (немного плотнее, чтобы не «проваливался») */
[data-theme="dark"] .langFlags .flagBtn.active,
.theme-dark .langFlags .flagBtn.active,
.dark .langFlags .flagBtn.active{
  background: rgba(16, 185, 129, .28);
  border-color: #10b981;
  box-shadow: inset 0 0 0 2px rgba(16,185,129,.4);
}/* Небольшой апгрейд для изображения флага внутри активного чипа */
.langFlags .flagBtn.active img{
  filter: saturate(1.05) contrast(1.05);
}/* VISUAL FIX v2: remove underline from donate and footer links */
a#donate, .donate, .donate a, .donate-btn, .donate-btn a, .icon-donate,
.footer a, .bottom, .bottom a, .footer .btn, .footer .btn a, .bottom .btn, .bottom .btn a{
  text-decoration: none !important;
  -webkit-text-decoration: none !important;
}/* CLEAN FIX: remove underline from donate icon by id */

#infoModal.modal{ display:flex; align-items:center; justify-content:center; }#infoModal.hidden{ display:none; }#infoModal .modalFrame{
  width:min( 640px, 94vw); background:var(--card); color:var(--text);
  border-radius:16px; box-shadow: 0 10px 30px rgba(0,0,0,.15); border:1px solid var(--border);
}#infoModal .modalBody{ padding:14px; font-size:14px; line-      min-height: 240px; }#infoModal .iconBtn.small{ width:36px; height:36px; border-radius:12px; }.infoContent p{ margin: 0 0 8px; }.infoContent ul{ margin: 6px 0 0 18px; }/* Dicts modal — symmetric spacing around flags + list breathing + footer divider */
#modal #langFlags, #modal .flagsRow{ margin:8px 0; padding:0 14px 14px; border-bottom:1px solid var(--border); }#modal .dictList{ margin-top:8px; padding-top:4px; padding-bottom:14px; max-height:230px; overflow-y:auto; }#modal .modalActions{ display:flex; justify-content:center; padding:14px 16px 20px; border-top:1px solid var(--border); }/* === Info modal: inset dividers to match Dicts modal === */
#infoModal .modalFrame{ overflow:visible; }#infoModal .modalHeader{display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 14px;
  border-bottom: none;
  position: relative;
  padding-left: 14px;
  padding-right: 14px;}#infoModal .modalActions{display: flex;
  justify-content: center;
  padding: 14px 14px 14px;
  border-top: none;
  position: relative;
  padding-left: 14px;
  padding-right: 14px;}#infoModal .modalActions::before{
  content:""; position:absolute; left:14px; right:14px; top:0; height:1px; background:var(--border);
}/* === Info modal header divider: inset like the bottom one (minimal override) === */
#infoModal .modalHeader{
  position: relative;
  border-bottom: none !important;
}#infoModal .modalHeader::after{content: "";
  position: absolute;
  left: 14px !important;
  right: 14px !important;
  bottom: 0;
  height: 1px;
  background: var(--border);}/* === Dicts modal bottom spacing: match Info modal === */
#modal .dialog{ padding: 14px 14px 0 !important; }/* was 14px all around */
#modal .modalActions{ padding: 14px 14px 14px !important; }/* keep total bottom = 20px */

#setupModal .sectionTitle,
#setupModal h3,
.firstRunDialog .sectionTitle,
.firstRunDialog h3,
.setupDialog .sectionTitle,
.setupDialog h3{
  text-align: center;
  margin-top: 14px;
  margin-bottom: 8px;
}/* 2) Training language flags: add same bottom divider with insets */
#setupModal .trainFlags,
#setupModal .langFlags.train,
#setupModal .train .langFlags,
.firstRunDialog .trainFlags,
.firstRunDialog .langFlags.train,
.setupDialog .trainFlags,
.setupDialog .langFlags.train{
  margin: 8px 0;
  padding: 0 14px 14px;
  border-bottom: 1px solid var(--border);
}/* 3) Ensure the main dialog frame clips dividers to rounded corners (safety) */
#setupModal .modalFrame,
.firstRunDialog .modalFrame,
.setupDialog .modalFrame{ overflow: hidden; }/* === Setup (first-run) modal: match visual language of other modals === */

#setupModal .field .label{
  text-align: center;
  margin-top: 14px;
  margin-bottom: 8px;
}/* 2) Inset divider under training flags (and whole flags block) */
#setupModal #langFlags{
  position: relative;
  margin: 8px 0;
  padding: 0 14px 14px;
}#setupModal #langFlags::after{
  content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 0;
  height: 1px;
  background: var(--border);
}/* 3) Ensure rounded corners clip the divider nicely */
#setupModal .dialog{ overflow: hidden; }/* === Setup modal header: inset divider under the main title (unified with Info/Dicts) === */
#setupModal .modalHeader{
  position: relative;
  border-bottom: none !important;
  padding-left: 14px;
  padding-right: 14px;
}#setupModal .modalHeader::after{
  content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 0;
  height: 1px;
  background: var(--border);
}/* --- Setup modal: force single inset divider under header (iOS/Safari fix) --- */
#setupModal .modalHeader::before{ display:none !important; }#setupModal hr{ display:none !important; }/* Fallback: if Setup modal has no .modalHeader, draw under the first title element */
#setupModal .dialog > .sectionTitle:first-child,
#setupModal .modalFrame > .sectionTitle:first-child,
#setupModal .dialog > h2:first-child,
#setupModal .modalFrame > h2:first-child{
  position: relative;
  padding-left: 14px;
  padding-right: 14px;
}#setupModal .dialog > .sectionTitle:first-child::after,
#setupModal .modalFrame > .sectionTitle:first-child::after,
#setupModal .dialog > h2:first-child::after,
#setupModal .modalFrame > h2:first-child::after{
  content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: -8px;
  height: 1px;
  background: var(--border);
}/* === UNIFIED DIVIDERS: use var(--border) everywhere for modal insets === */
#setupModal .sectionTitle,
.firstRunDialog .sectionTitle,
.setupDialog .sectionTitle{
  position: relative;
}#setupModal .sectionTitle::after,
.firstRunDialog .sectionTitle::after,
.setupDialog .sectionTitle::after{
  content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: -8px;
  height: 1px;
  background: var(--border);
  transform: translateZ(0);       /* crisper 1px on iOS */
  -webkit-transform: translateZ(0);
}/* === Dicts modal: header divider aligned EXACTLY like dark theme (light theme fix only) === */
#modal .modalHeader{ position:relative; padding-left:14px; padding-right:14px; border-bottom:none; }#modal .modalHeader .modalTitle{ margin:0; }/* убираем лишние 8px, чтобы линия была ближе к заголовку */
#modal .modalHeader::after{
  content:""; position:absolute; left:14px; right:14px; bottom:0; height:1px; background:var(--border);
  transform:translateZ(0); -webkit-transform:translateZ(0);
}/* === Dicts modal: prevent double header line caused by inline .modal .modalHeader border === */
#modal .modalHeader{ border-bottom: none !important; }/* keep only ::after inset divider */

   We do NOT change existing selectors; we only add #settingsModal twins.
   ===================================================================== */
#settingsModal.modal{
  display: flex;
  align-items: center;
  justify-content: center;
}/* =====================================================================
   Settings modal — visual parity with Info modal (v1.6.3 hotfix, corrected)
   NOTE: We DO NOT touch #infoModal at all to avoid overriding its hidden state.
         Only #settingsModal selectors are added.
   ===================================================================== */
#settingsModal.modal{
  display: flex;
  align-items: center;
  justify-content: center;
}#settingsModal.hidden{display: none !important;}#settingsModal .modalFrame{width: min(680px, 92vw);
  background: var(--card);
  color: var(--text);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
  border: 1px solid var(--border);
  overflow: hidden;}#settingsModal .modalHeader{display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 14px;
  position: relative;
  border-bottom: none !important;
  position: relative;}#settingsModal .modalHeader::after{content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 0;
  height: 1px;
  background: var(--border);}#settingsModal .modalBody{padding: 14px;
  font-size: 14px;
  line-height: 1.5;
  color: var(--text);}#settingsModal .modalActions{display: flex;
  justify-content: center;
  padding: 14px 14px 14px;
  border-top: none !important;
  position: relative;}#settingsModal .modalActions::before{
  content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  top: 0;
  height: 1px;
  background: var(--border);
}#settingsModal .iconBtn.small{width: 36px;
  height: 36px;
  border-radius:12px;}/* Guard: ensure Info modal uses inset divider only (no full-width border) */
#infoModal .modalActions{ border-top: none !important; }/* Donate modal — оформление как у Settings */
#donateModal.modal{
  display: flex;
  align-items: center;
  justify-content: center;
}#donateModal.hidden{ display: none; }#donateModal .modalFrame{
  width: min(680px, 92vw);
  background: var(--card);
  color: var(--text);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
  border: 1px solid var(--border);
  overflow: hidden;
}#donateModal .modalHeader{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 14px;
  position: relative;
  border-bottom: none !important;
}#donateModal .modalHeader::after{
  content: "";
  position: absolute;
  left: 14px; right: 14px; bottom: 0;
  height: 1px; background: var(--border);
}#donateModal .modalBody{
  padding: 14px;
  font-size: 14px;
  line-height: 1.5;
  color: var(--text);
}#donateModal .modalActions{
  display: flex;
  justify-content: center;
  padding: 14px 14px 14px;
  position: relative;
}#donateModal .modalActions::before{
  content: "";
  position: absolute;
  left: 14px; right: 14px; top: 0;
  height: 1px; background: var(--border);
}#donateModal .iconBtn.small{
  width: 36px;
  height: 36px;
  border-radius:12px;
}/* Mode toggle — iOS-like switch */
#modeToggleWrap{ user-select:none }#modeToggleWrap label{ gap:12px }#modeToggleWrap #modeToggle{
  appearance: none;
  position: relative;
  width: 54px; height: 30px;
  border-radius: 999px;
  background: var(--border);
  border: 1px solid var(--border);
  outline: none;
  cursor: pointer;
  transition: background .2s ease, border-color .2s ease, box-shadow .2s ease;
  display: inline-block;
}#modeToggleWrap #modeToggle::after{
  content:"";
  position:absolute; top:50%; left:4px;
  width:22px; height:22px; border-radius:50%;
  background: var(--mode-normal);
  box-shadow: 0 1px 2px rgba(0,0,0,.2);
  transform: translateY(-50%);
  transition: left .2s ease, background .2s ease;
}#modeToggleWrap #modeToggle:checked{
  background: var(--border);      /* зелёный ON; можно заменить var(...) */
  border-color: var(--border);
}#modeToggleWrap #modeToggle:checked::after{ background: var(--mode-hard);  left: 28px; }#modeToggleWrap #modeToggle:focus-visible{
  box-shadow: 0 0 0 3px rgba(100,150,240,.35);
}#modeToggleWrap span{ font-size:14px; opacity:.9 }/* Confirm modal tweaks (reuse existing modal styles) */
.confirmModal .modalFrame{ max-width: 520px; }/* --- Confirm modal overlay fix: opaque bg, top z-index, block scroll --- */
.modal.confirmModal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.45);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  z-index: 9999; /* above Settings modal */
}.modal.confirmModal:not(.hidden){ display:flex; }.modal.confirmModal .modalFrame{
  background: var(--modal-bg, #fff);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  width: min(92vw, 520px);
  max-width: 520px;
}body.modal-open{ overflow: hidden; }/* --- Confirm modal visual parity with Info/Donate/Settings --- */
.confirmModal .modalHeader{
  padding: 12px 16px !important;

}.confirmModal .modalTitle{
  margin: 0;
  font-weight: 700;
}.confirmModal .modalBody{
  padding: 16px !important;
}.confirmModal #confirmText{
  margin: 6px 0 2px 0;
  line-height: 1.35;
}.confirmModal .btn.primary{min-width: 120px;}.confirmModal .btn{ padding: 10px 16px; }/* --- Confirm modal: dark theme adaptation + consistent dividers --- */
.confirmModal .modalFrame{
  color: var(--modal-fg, inherit);
  background: var(--modal-bg, #fff);
}/* Light theme divider colors */
.confirmModal .modalHeader,
.confirmModal .modalActions{
  border-color: var(--modal-divider, rgba(0,0,0,0.10)) !important;
}/* Dark theme overrides */
html[data-theme="dark"] .confirmModal .modalFrame,
:root.theme-dark .confirmModal .modalFrame{
  background: var(--modal-bg-dark, #22262e);
  color: var(--modal-fg-dark, #e8eaee);
}html[data-theme="dark"] .confirmModal .modalHeader,
html[data-theme="dark"] .confirmModal .modalActions,
:root.theme-dark .confirmModal .modalHeader,
:root.theme-dark .confirmModal .modalActions{
  border-color: var(--modal-divider-dark, rgba(255,255,255,0.10)) !important;
}/* Ensure body text readable in dark */
html[data-theme="dark"] .confirmModal #confirmText,
:root.theme-dark .confirmModal #confirmText{
  color: var(--modal-fg-dark, #e8eaee);
  opacity: 0.95;
}/* Optional: subtle top border to fully match other modals if needed */
.confirmModal .modalFrame{
  border-top: 1px solid transparent; /* keeps geometry consistent */
}/* --- Confirm modal: use global theme tokens exactly like other modals --- */
.confirmModal .modalFrame{
  background: var(--card) !important;
  color: var(--text) !important;
}.confirmModal .modalHeader{

}/* --- Confirm modal: forced header divider like other modals --- */
.confirmModal .modalHeader{ position: relative; }/* Confirm modal header: use inset divider only, no border-bottom */
.confirmModal .modalHeader{ position: relative !important; border-bottom: none !important; }/* Confirm modal footer: inset divider like header */
.confirmModal .modalActions{ position: relative !important; }/* === Confirm modal: authoritative inset dividers (no duplicate borders) === */
.confirmModal .modalHeader{ position: relative !important; border-bottom: none !important; }.confirmModal .modalHeader::after{content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 0;
  height: 1px;
  background: var(--border);}.confirmModal .modalActions{display: flex;
  gap: 12px;
  justify-content: center;
  padding: 12px 16px !important;
  position: relative !important;}.confirmModal .modalActions::before{content: "";
  position: absolute;
  left: 14px;
  right: 14px;
  top: 0;
  height: 1px;
  background: var(--border);}/* Confirm modal: kill any remaining dark-theme header border to avoid duplicate line */
html[data-theme="dark"] .confirmModal .modalHeader{ border-bottom: none !important; }:root.theme-dark .confirmModal .modalHeader{ border-bottom: none !important; }/* Setup Mode toggle — reuse Settings styles */
#setupModeToggleWrap{ user-select:none }#setupModeToggleWrap label{ gap:12px }#setupModeToggleWrap #setupModeToggle{
  appearance: none;
  position: relative;
  width: 54px; height: 30px;
  border-radius: 999px;
  background: var(--border);
  border: 1px solid var(--border);
  outline: none;
  cursor: pointer;
  transition: background .2s ease, border-color .2s ease, box-shadow .2s ease;
  display: inline-block;
}#setupModeToggleWrap #setupModeToggle::after{
  content:"";
  position: absolute;
  left: 2px; top: 2px;
  width: 24px; height: 24px;
  border-radius: 50%;
  background: var(--mode-normal);
  box-shadow: 0 2px 4px rgba(0,0,0,.15);
  transition: left .2s ease, background .2s ease;
}#setupModeToggleWrap #setupModeToggle:checked{
  background: var(--border);
  border-color: var(--border);
}#setupModeToggleWrap #setupModeToggle:checked::after{ background: var(--mode-hard);  left: 28px; }#setupModeToggleWrap #setupModeToggle:focus-visible{
  box-shadow: 0 0 0 3px rgba(100,150,240,.35);
}#setupModeToggleWrap span{ font-size:14px; opacity:.9 }@media (prefers-reduced-motion: reduce){#modeToggleWrap #modeToggle, #modeToggleWrap #modeToggle: :after{ transition:none };
  #setupModeToggleWrap #setupModeToggle, #setupModeToggleWrap #setupModeToggle: :after{ transition:none };}/* Confirm Cancel button — match "Не знаю" ghost style (both themes) */
#confirmCancel{
  background: var(--idk-bg);
  border: 1px solid var(--border);
  color: var(--idk-fg);
  margin-top: 6px;
  height: 42px;
  padding: 0 16px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  transition: filter .2s ease, transform .06s ease, background .2s ease, border-color .2s ease, color .2s ease;
}#confirmCancel:hover{ filter: brightness(1.06); }#confirmCancel:focus, #confirmCancel:focus-visible{ outline: none; box-shadow: 0 0 0 3px var(--focus-ring); }/* Dark theme parity */
[data-theme="dark"] #confirmCancel{
  background: #111827;
  color: var(--text);
  border: 1px solid #374151;
  box-shadow: none;
}/* === Mode corners on trainer card (TOP corners only, bigger) === */
:root{
  --mode-normal:var(--mint);   /* amber/yellow */
  --mode-hard:#ef4444;     /* red */
}/* Added: bottom corner ribbons */

.card.mode-normal::after,
.card.mode-hard::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  border-radius:16px;
  background-size: 18px 18px;
  background-repeat: no-repeat;
}.card.mode-normal::after{
  background-image:
    linear-gradient(45deg, var(--mode-normal) 16px, transparent 16px),
    linear-gradient(315deg, var(--mode-normal) 16px, transparent 16px);
  background-position: bottom left, bottom right;
}.card.mode-hard::after{
  background-image:
    linear-gradient(45deg, var(--mode-hard) 16px, transparent 16px),
    linear-gradient(315deg, var(--mode-hard) 16px, transparent 16px);
  background-position: bottom left, bottom right;
}.card.mode-normal, .card.mode-hard{ position: relative; }.card.mode-normal::before,
.card.mode-hard::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  border-radius:16px; /* match .card radius */
  background-size: 18px 18px;
  background-repeat: no-repeat;
}.card.mode-normal::before{
  background-image:
    linear-gradient(135deg, var(--mode-normal) 16px, transparent 16px),
    linear-gradient(225deg, var(--mode-normal) 16px, transparent 16px);
  background-position: top left, top right;
}.card.mode-hard::before{
  background-image:
    linear-gradient(135deg, var(--mode-hard) 16px, transparent 16px),
    linear-gradient(225deg, var(--mode-hard) 16px, transparent 16px);
  background-position: top left, top right;
}/* Скрыть шапку и бары, когда открыт мастер начальной настройки */
body:has(#setupModal:not(.hidden)) #dictActiveTitle,
body:has(#setupModal:not(.hidden)) #setsBar,
body:has(#setupModal:not(.hidden)) #setStats{
  opacity: 0;
  visibility: hidden;
}/* Spoilers in main sets panel (non-intrusive) */
.dictSpoiler{
  border:1px solid var(--border);
  border-radius:12px;
  margin:6px 0;
  overflow:hidden;
  background: transparent;
  width: 640px;
  max-width: 94vw;
  margin-left: auto;
  margin-right: auto;
  overflow:hidden;
}.setsSpoilerBody{ padding:8px; }/* Light theme tokens (use your existing CSS vars if present) */
:root.light{
  --panel-bg:#fff;
  --border-color:#e3e3e3;
}/* Keep only spoiler title: hide any legacy dict labels when rendered inside the spoiler body */
.setsSpoilerBody .dictActiveTitle,
.setsSpoilerBody .dictHeader,
.setsSpoilerBody .dictBadge,
.setsSpoilerBody .dictName,
.setsSpoilerBody .dictTitle,
.setsSpoilerBody [data-role="dict-title"]{
  display:none !important;
}/* Ensure spoiler toggles only by summary */
.dictSpoiler .flag{ margin-right:6px; }/* Only tiles inside body — hide any stray headers/badges the original renderer might prepend */
.setsSpoilerBody > :not(button):not(.setTile):not(.tiles):not(.grid):not(.btn):not(.btns){
  display:none !important;
}/* Light theme polish */
:root.light

#setControls{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
  padding:8px 12px 6px;
}#setsBar{ display:flex; flex-wrap:wrap; justify-content:flex-start; gap:2px; padding:4px 0 2px; margin:4px 0 4px; }#setStats{
  text-align:center;
  color:var(--muted);
  font-size:12px;
  line-height:1.2;
  margin-top:0px;
  position:static !important;
  opacity:1 !important;
  visibility:visible !important;
}:root.light .dictSpoiler[open] > summary{ border-bottom-color: var(--border) !important; }/* Hide content behind setup modal (first run) — CSS-only */
html:has(#setupModal:not(.hidden)) #dictSpoiler,
html:has(#setupModal:not(.hidden)) main .card{ opacity:0; visibility:hidden; pointer-events:none; }/* Unified radii & border widths */
.card, .dictSpoiler, .btn, .options .optionBtn, .modal, .modal .actions .btn{  border-radius: var(--radius-base); }:where(.card, .dictSpoiler, .btn, .iconBtn, .options .optionBtn, .modal, .langFlags .flagBtn, .statsBar, #setsBar .setTile){
  border-width: var(--border-width);
}/* === Sets grid: 9 per row, 3px gaps, perfect squares === */
#setsBar{
  --tiles-per-row: 10;
  --tile-gap: 3px;
  display:flex;
  flex-wrap:wrap;
  justify-content:flex-start;
  gap: var(--tile-gap);
  padding: 6px 0 2px;
  margin: 6px 0 8px;

  padding-left: var(--tile-gap);
  padding-right: var(--tile-gap);}#setsBar .setTile{min-width: 0 !important;
  height: auto !important;
  padding: 0 !important;
  border-radius:12px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--muted);
  font-weight: 600;
  font-size: 13px;
  user-select: none;
  cursor: pointer;
  transition: transform .12s ease, background .12s ease, border-color .12s ease, color .12s ease;
  flex: 0 0 calc((100% - (var(--tiles-per-row) - 1) * var(--tile-gap)) / var(--tiles-per-row));
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;}#setsBar .setTile.active{border-width: 2px;
  border-color: var(--mint-strong);
  color: var(--text);}/* Спойлер никогда не обрезает содержимое */
.dictSpoiler{ overflow: visible; }/* Внутренний контейнер: даём фиксированный нижний запас под строку статистики */
#dictSpoiler > #setControls,
.dictSpoiler > #setControls{
  padding-bottom: 10px;   /* было 8px — теперь статистика точно помещается */
}/* Если строк много — высота нормально считается, ряды не «сжимаются» */
#setsBar{ align-content: flex-start; }/* Небольшой отступ сверху у статистики для дыхания */
#setStats{ margin-top: 0px; }/* === Center align when total sets ≤ 10 === */
#setsBar{
  justify-content: flex-start;  /* default left */
}/* Center first row if only 1–10 tiles */
#setsBar:has(.setTile:nth-child(10):last-child),
#setsBar:has(.setTile:nth-child(9):last-child),
#setsBar:has(.setTile:nth-child(8):last-child),
#setsBar:has(.setTile:nth-child(7):last-child),
#setsBar:has(.setTile:nth-child(6):last-child),
#setsBar:has(.setTile:nth-child(5):last-child),
#setsBar:has(.setTile:nth-child(4):last-child),
#setsBar:has(.setTile:nth-child(3):last-child),
#setsBar:has(.setTile:nth-child(2):last-child),
#setsBar:has(.setTile:nth-child(1):last-child){
  justify-content: center;
}/* === Dual chevrons for spoiler summary (left + right), no impact on #setsBar rules === */
.dictSpoiler > summary{
  position: relative;
  padding-left: 28px;  /* space for left chevron */
  padding-right: 28px; /* space for right chevron */
}.dictSpoiler summary::before,
.dictSpoiler summary::after{
  content: "▼";
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.9em;
  line-height: 1;
  color: var(--option-fg, var(--btn-text, var(--text)));
  transition: transform .25s ease, color .2s ease, opacity .2s ease;
  opacity: .9;
  pointer-events: none;
}.dictSpoiler summary::before{ left: 8px; }.dictSpoiler summary::after{ right: 8px; }.dictSpoiler[open] summary::before,
.dictSpoiler[open] summary::after{
  transform: translateY(-50%) rotate(180deg);
}.dictSpoiler > summary:hover::before,
.dictSpoiler > summary:hover::after,
.dictSpoiler > summary:focus-visible::before,
.dictSpoiler > summary:focus-visible::after{
  opacity: 1;
}:root.light .dictSpoiler summary::before,
:root.light .dictSpoiler summary::after{
  color: rgba(0,0,0,0.55) !important;
}/* === Spoiler summary marker fixes (iOS Safari) === */
.dictSpoiler > summary::-webkit-details-marker{ display: none; }/* Closed state: fully rounded header so nothing sticks out */
.dictSpoiler:not([open]) > summary{
  border-radius: 12px;
}/* Open state: only top corners rounded; bottom straight to join body */
.dictSpoiler[open] > summary{
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}/* === Unified spoiler radius fix (iOS / Safari visual precision) === */
:root{ --spoiler-radius: 12px; }.dictSpoiler{
  border-radius: var(--spoiler-radius);
  overflow: visible;
}.dictSpoiler:not([open]){
  overflow: hidden;
  -webkit-mask-image: radial-gradient(#000, #000);
}.dictSpoiler[open]{
  overflow: visible;
  -webkit-mask-image: none;
}.dictSpoiler > summary{cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 700;
  font-size: 18px;
  padding: 10px 12px;
  margin: 0;
  list-style: none;
  position: relative;
  z-index: 1;
  background: var(--card);
  color: var(--muted); border: 0;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  overflow: hidden;
  border-radius: var(--spoiler-radius);
  background-clip: padding-box;}.dictSpoiler:not([open]) > summary{ overflow:hidden; }.dictSpoiler[open] > summary{border-bottom: 1px solid var(--border);
  border-top-left-radius: var(--spoiler-radius);
  border-top-right-radius: var(--spoiler-radius);
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;}.dictSpoiler > summary::-webkit-details-marker{ display: none; }.dictSpoiler > summary::marker{content: "";}

.card .topRow .heart,
.heart {
  color: var(--icon-muted, #cbd5e1) !important;
  transition: color .25s ease, transform .2s ease;
}
.card .topRow .heart.is-fav,
.heart.is-fav {
  color: var(--icon-active, #fbbf24) !important;
}
@media (hover:hover){
  .card .topRow .heart:hover,
  .heart:hover { color: var(--icon-hover, #facc15) !important; }
}
.heart svg { width: 1em; height: 1em; display: inline-block; vertical-align: -0.2em; }
.heart svg * { fill: none !important; stroke: currentColor !important; stroke-width: 1.6; vector-effect: non-scaling-stroke; }
.heart.is-fav svg * { fill: currentColor !important; stroke: currentColor !important; }
:root[data-theme="dark"] .heart { color: var(--icon-muted, #9aa3af) !important; }
:root[data-theme="dark"] .heart.is-fav { color: var(--icon-active, #facc15) !important; }

.tabPanel.hidden { display: none; }
.tabs { display:flex; gap:8px; padding:8px 12px 0; border-bottom:1px solid rgba(0,0,0,.1); }
.tab { border:none; background:none; padding:8px 12px; cursor:pointer; border-bottom:2px solid transparent; }
.tab.active { border-bottom-color: var(--accent, #888); font-weight:600; }

.tabs { border-bottom: none !important; }

#panel-about { text-align: center; }
.aboutGrid { justify-items: start; }
.aboutRow { grid-template-columns: auto auto; }
.aboutLabel, .aboutValue { text-align: left; }
.actionsRow { margin: 12px 0; display: flex; justify-content: center; }

.aboutSep {
  margin: 8px 0 12px;
  height: 1px;
  background: var(--border);
  border: 0;
}

#infoModal .aboutSep { margin: 8px 0 12px; height: 1px; background: var(--border); }
#infoModal #panel-about:not(.hidden){ text-align: left;  display:flex !important; flex-direction:column !important; overflow-y:visible; }
#infoModal .aboutGrid { justify-items: start; }
#infoModal .aboutRow { display: grid; grid-template-columns: auto auto; align-items: center; gap: 8px; }
#infoModal .aboutLabel { color: var(--text); font-weight: 600; text-align:left; }
#infoModal .actionsRow { margin: 10px 0 8px; display: flex; justify-content: center; }
#infoModal .regBlock { margin-top: 10px; display: grid; gap: 6px; }
#infoModal .regRow { display: flex; flex-direction: column; align-items: center; gap: 8px; }
#infoModal .regRow input[type="text"] { width: 100%; max-width: 320px; padding: 8px 10px; border: 1px solid var(--tool-border); border-radius: 6px;  background: var(--tool-bg); color: var(--tool-fg); caret-color: var(--text);}
#infoModal .tabs .tab,

#infoModal .tabs .tab.active{ background: transparent !important; border:2px solid #10b981 !important; color: var(--text); }
#infoModal .tabs .tab{ -webkit-appearance:none; appearance:none;  color: var(--text); background: var(--tool-bg); border:none; border-radius:12px; padding:6px 18px; }

:root[data-theme="dark"] #infoModal .aboutRow,
.theme-dark #infoModal .aboutRow,
:root[data-skin="alt"] #infoModal .aboutRow,
.skin-alt #infoModal .aboutRow{
  grid-template-columns: auto auto !important;
  justify-items: start;
}
:root[data-theme="dark"] #infoModal .aboutRow .aboutValue,
.theme-dark #infoModal .aboutRow .aboutValue,
:root[data-skin="alt"] #infoModal .aboutRow .aboutValue,
.skin-alt #infoModal .aboutRow .aboutValue{
  margin-top: 0;
}

#infoModal .regRow input[type="text"]::placeholder{ color: var(--muted); }

#infoModal .btnPill:disabled{
  opacity:.6;
  background: var(--btn-disabled-bg, rgba(0,0,0,.12));
  color: var(--muted);
  border: none;
  cursor: default;
}

#infoModal .btnPill{
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 12px;
  font-size: 15px;

  font-weight: 500;
  box-shadow: none;
 padding:8px 16px; }
#infoModal .btnPill:hover{
  background: rgba(0,0,0,0.05);
}
#infoModal .btnPill:disabled{
  opacity: .6;
  background: var(--card);
  color: var(--muted);
  border: 1px solid var(--border);
  cursor: default;
}

#infoModal #regKeyLabel{ color: var(--text); font-weight:600; text-align:left; }

#infoModal .modalActions{ padding: 12px 16px 16px !important; }

#infoModal .tabs{
  display:flex !important;
  justify-content:center !important;
  gap:8px !important;
  margin-bottom:8px !important;
}
#infoModal .tabs .tab{
  -webkit-appearance:none !important;
  appearance:none !important;
  background: var(--tool-bg) !important;
  color: var(--text) !important;
  border: none !important;
  border-radius: 12px !important;
  padding: 6px 18px !important;
}
#infoModal .tabs .tab.active{
  background: transparent !important;
  border: 2px solid #10b981 !important;
  color: var(--text) !important;
}
#infoModal .modalBody{      min-height: 240px; }

#infoModal .modalFrame{ width:min(640px, 94vw) !important; }

#infoModal #panel-about .aboutGrid{     row-gap:6px !important; }
#infoModal #panel-about .aboutRow{   gap:6px !important; }
#infoModal #panel-about .actionsRow{       margin:12px 0 12px !important; }
#infoModal #panel-about .aboutSep{   margin-top:auto !important;  margin:10px 0 !important; }

#infoModal #panel-about:not(.hidden){    display:flex !important; flex-direction:column !important; overflow-y:visible; }
#infoModal #panel-about .aboutGrid{ flex:0 0 auto !important;    row-gap:6px !important; }
#infoModal #panel-about .actionsRow{ flex:0 0 auto !important;       margin:12px 0 12px !important; }
#infoModal #panel-about .aboutSep{ flex:0 0 auto !important;   margin-top:auto !important;  margin:10px 0 !important; }
#infoModal #panel-about .regBlock{ flex:0 0 auto !important;     margin:10px 0 12px !important; }
#infoModal #panel-about .regRow{     margin-top:6px !important; }
#infoModal .modalBody{      min-height: 240px; }

#infoModal #panel-about .actionsRow{       margin:12px 0 12px !important; }
#infoModal #panel-about .aboutSep{   margin-top:auto !important;  margin:10px 0 !important; }
#infoModal #panel-about .regBlock{     margin:10px 0 12px !important; }
#infoModal #panel-about .regRow{     margin-top:6px !important; }

#infoModal .actionsRow{ margin:4px 0 2px !important; display:flex !important; justify-content:center !important; }
#infoModal .aboutSep{ margin:2px 0 4px !important; height:1px !important; background: var(--border) !important; }
#infoModal .regBlock{ margin-top:2px !important; }

.center{ text-align:center; }
.flex-center{ display:flex; align-items:center; justify-content:center; }
.flex-between{ display:flex; align-items:center; justify-content:space-between; }
.gap-10{ gap:10px; }
.mt-10{ margin-top:10px; }
.mt-20{ margin-top:20px; }
.m-10{ margin:10px; }
.cursor-pointer{ cursor:pointer; }

.modalBody h3.backupTitle {
  font-size: 16px !important;
  font-weight: 600 !important;
  line-height: 1.25;
  margin: 0 0 10px;
  text-align: left;
}

.modalBody #modeToggleWrap + .sectionDivider {
  margin: 12px 0 10px;
}

.modalBody #backupSection .btnRow {
  display: flex;
  justify-content: center;
  gap: var(--gap, 12px);
  margin-top: 8px;
}

.modalBody .settingsSubtitle{
  font-size:16px;
  font-weight:600;
  line-height:1.25;
  margin:0 0 10px;
  text-align:left;
}
.modalBody .settingsDividerBelowToggle{
  margin:12px 0 10px;
}
.modalBody #backupSection .btnRow{
  display:flex;
  justify-content:center;
  gap:var(--gap,12px);
  margin-top:8px;
}
